{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = require(\"react\");\n\nvar react_1 = require(\"react\");\n\nvar react_router_dom_1 = require(\"react-router-dom\");\n\nvar react_redux_1 = require(\"react-redux\");\n\nvar utility_1 = require(\"../../../shared/utility\");\n\nvar FormElement_1 = require(\"../../UI/FormElement/FormElement\");\n\nvar enums_1 = require(\"../../../shared/enums\");\n\nvar actions = require(\"../../../store/actions/bankActions\"); //import * as locationActions from '../../../store/actions/locationActions';\n\n\nvar authActions = require(\"../../../store/actions/authActions\");\n\n;\nvar initialFormState = {\n  name: {\n    elementType: enums_1.ElementTypeEnum.Input,\n    elementConfig: {\n      type: enums_1.ElementConfigTypeEnum.Text,\n      placeholder: 'Name'\n    },\n    value: '',\n    validation: {\n      required: true\n    },\n    valid: false\n  },\n  grade: {\n    elementType: enums_1.ElementTypeEnum.Input,\n    elementConfig: {\n      type: enums_1.ElementConfigTypeEnum.Number,\n      placeholder: 'Grade',\n      maxlength: 1\n    },\n    value: '',\n    validation: {\n      maxLength: 1,\n      max: 5\n    },\n    valid: false\n  }\n};\nvar BankNew = react_1.memo(function (props) {\n  var _a = react_redux_1.useSelector(function (state) {\n    return {\n      loggedIn: state.auth.loggedIn,\n      token: state.auth.token,\n      loading: state.common.isLoading,\n      successfulOperation: state.common.successfulOperation\n    };\n  }),\n      loggedIn = _a.loggedIn,\n      token = _a.token,\n      loading = _a.loading,\n      successfulOperation = _a.successfulOperation;\n\n  var dispatch = react_redux_1.useDispatch();\n  var location = react_router_dom_1.useLocation();\n\n  var _b = react_1.useState(initialFormState),\n      formControls = _b[0],\n      setFormControls = _b[1];\n\n  var _c = react_1.useState(false),\n      isFormValid = _c[0],\n      setIsFormValid = _c[1];\n\n  var _d = react_1.useState(),\n      redirect = _d[0],\n      setRedirect = _d[1];\n\n  react_1.useEffect(function () {\n    if (!loggedIn) {\n      dispatch(authActions.setAuthRedirectPath(location.pathname));\n      setRedirect(React.createElement(react_router_dom_1.Redirect, {\n        to: \"/auth/\"\n      }));\n    }\n  }, [loggedIn]);\n  react_1.useEffect(function () {\n    setIsFormValid(utility_1.ValidateForm(formControls));\n  }, [formControls]);\n  react_1.useEffect(function () {\n    if (successfulOperation === enums_1.SuccessfulOperationEnum.Insert) {\n      cancelHandler();\n    }\n  }, [successfulOperation]);\n\n  var elementHandler = function elementHandler(event, id) {\n    setFormControls(utility_1.getUpdatedForm(event, formControls, id));\n  };\n\n  var cancelHandler = react_1.useCallback(function () {\n    setRedirect(React.createElement(react_router_dom_1.Redirect, {\n      to: \"/banks/\"\n    }));\n  }, [setRedirect]);\n\n  var saveHandler = function saveHandler(event) {\n    event.preventDefault();\n    var bank = {\n      id: 0,\n      name: formControls.name.value.toString(),\n      grade: 0\n    };\n    dispatch(actions.saveBank(bank, token));\n  };\n\n  var formElements = utility_1.getFormElements(formControls).map(function (formElement) {\n    return React.createElement(FormElement_1.default, {\n      formElement: formElement,\n      key: formElement.id,\n      onChange: function onChange(event) {\n        return elementHandler(event, formElement.id);\n      },\n      onLostFocus: function onLostFocus(event) {\n        return elementHandler(event, formElement.id);\n      }\n    });\n  });\n  return React.createElement(\"div\", null, redirect, React.createElement(\"form\", {\n    onSubmit: saveHandler\n  }, formElements, React.createElement(\"div\", {\n    className: \"row\"\n  }, React.createElement(\"div\", {\n    className: \"col-12 text-center\"\n  }, React.createElement(\"button\", {\n    className: \"btn btn-primary\",\n    type: \"reset\"\n  }, \"Clear\"), React.createElement(\"button\", {\n    className: \"btn btn-success\",\n    type: \"submit\",\n    disabled: !isFormValid || loading\n  }, \"Save\"), React.createElement(\"button\", {\n    className: \"btn btn-warning\",\n    type: \"button\",\n    onClick: cancelHandler\n  }, \" Cancel\")))));\n});\nexports.default = BankNew;","map":{"version":3,"sources":["BankNew.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar React = require(\"react\");\r\nvar react_1 = require(\"react\");\r\nvar react_router_dom_1 = require(\"react-router-dom\");\r\nvar react_redux_1 = require(\"react-redux\");\r\nvar utility_1 = require(\"../../../shared/utility\");\r\nvar FormElement_1 = require(\"../../UI/FormElement/FormElement\");\r\nvar enums_1 = require(\"../../../shared/enums\");\r\nvar actions = require(\"../../../store/actions/bankActions\");\r\n//import * as locationActions from '../../../store/actions/locationActions';\r\nvar authActions = require(\"../../../store/actions/authActions\");\r\n;\r\nvar initialFormState = {\r\n    name: {\r\n        elementType: enums_1.ElementTypeEnum.Input,\r\n        elementConfig: {\r\n            type: enums_1.ElementConfigTypeEnum.Text,\r\n            placeholder: 'Name',\r\n        },\r\n        value: '',\r\n        validation: {\r\n            required: true\r\n        },\r\n        valid: false\r\n    },\r\n    grade: {\r\n        elementType: enums_1.ElementTypeEnum.Input,\r\n        elementConfig: {\r\n            type: enums_1.ElementConfigTypeEnum.Number,\r\n            placeholder: 'Grade',\r\n            maxlength: 1\r\n        },\r\n        value: '',\r\n        validation: {\r\n            maxLength: 1,\r\n            max: 5\r\n        },\r\n        valid: false\r\n    }\r\n};\r\nvar BankNew = react_1.memo(function (props) {\r\n    var _a = react_redux_1.useSelector(function (state) { return ({\r\n        loggedIn: state.auth.loggedIn,\r\n        token: state.auth.token,\r\n        loading: state.common.isLoading,\r\n        successfulOperation: state.common.successfulOperation\r\n    }); }), loggedIn = _a.loggedIn, token = _a.token, loading = _a.loading, successfulOperation = _a.successfulOperation;\r\n    var dispatch = react_redux_1.useDispatch();\r\n    var location = react_router_dom_1.useLocation();\r\n    var _b = react_1.useState(initialFormState), formControls = _b[0], setFormControls = _b[1];\r\n    var _c = react_1.useState(false), isFormValid = _c[0], setIsFormValid = _c[1];\r\n    var _d = react_1.useState(), redirect = _d[0], setRedirect = _d[1];\r\n    react_1.useEffect(function () {\r\n        if (!loggedIn) {\r\n            dispatch(authActions.setAuthRedirectPath(location.pathname));\r\n            setRedirect(React.createElement(react_router_dom_1.Redirect, { to: \"/auth/\" }));\r\n        }\r\n    }, [loggedIn]);\r\n    react_1.useEffect(function () {\r\n        setIsFormValid(utility_1.ValidateForm(formControls));\r\n    }, [formControls]);\r\n    react_1.useEffect(function () {\r\n        if (successfulOperation === enums_1.SuccessfulOperationEnum.Insert) {\r\n            cancelHandler();\r\n        }\r\n    }, [successfulOperation]);\r\n    var elementHandler = function (event, id) {\r\n        setFormControls(utility_1.getUpdatedForm(event, formControls, id));\r\n    };\r\n    var cancelHandler = react_1.useCallback(function () {\r\n        setRedirect(React.createElement(react_router_dom_1.Redirect, { to: \"/banks/\" }));\r\n    }, [setRedirect]);\r\n    var saveHandler = function (event) {\r\n        event.preventDefault();\r\n        var bank = {\r\n            id: 0,\r\n            name: formControls.name.value.toString(),\r\n            grade: 0\r\n        };\r\n        dispatch(actions.saveBank(bank, token));\r\n    };\r\n    var formElements = utility_1.getFormElements(formControls).map(function (formElement) { return (React.createElement(FormElement_1.default, { formElement: formElement, key: formElement.id, onChange: function (event) { return elementHandler(event, formElement.id); }, onLostFocus: function (event) { return elementHandler(event, formElement.id); } })); });\r\n    return (React.createElement(\"div\", null,\r\n        redirect,\r\n        React.createElement(\"form\", { onSubmit: saveHandler },\r\n            formElements,\r\n            React.createElement(\"div\", { className: \"row\" },\r\n                React.createElement(\"div\", { className: \"col-12 text-center\" },\r\n                    React.createElement(\"button\", { className: \"btn btn-primary\", type: \"reset\" }, \"Clear\"),\r\n                    React.createElement(\"button\", { className: \"btn btn-success\", type: \"submit\", disabled: !isFormValid || loading }, \"Save\"),\r\n                    React.createElement(\"button\", { className: \"btn btn-warning\", type: \"button\", onClick: cancelHandler }, \" Cancel\"))))));\r\n});\r\nexports.default = BankNew;\r\n//# sourceMappingURL=BankNew.js.map"]},"metadata":{},"sourceType":"module"}